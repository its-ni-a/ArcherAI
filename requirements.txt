# requirements.txt
# Save this as requirements.txt and run: pip install -r requirements.txt

openai>=1.0.0
langchain>=0.1.0
langchain-openai>=0.0.5
python-dotenv>=1.0.0
sentence-transformers>=2.2.0
scikit-learn>=1.3.0
numpy>=1.24.0
beautifulsoup4>=4.12.0
requests>=2.31.0

# Installation and setup script
# setup.py

import subprocess
import sys
import os

def install_requirements():
    """Install required packages"""
    requirements = [
        "openai>=1.0.0",
        "langchain>=0.1.0", 
        "langchain-openai>=0.0.5",
        "python-dotenv>=1.0.0",
        "sentence-transformers>=2.2.0",
        "scikit-learn>=1.3.0",
        "numpy>=1.24.0",
        "beautifulsoup4>=4.12.0",
        "requests>=2.31.0"
    ]
    
    print("Installing required packages...")
    for package in requirements:
        try:
            subprocess.check_call([sys.executable, "-m", "pip", "install", package])
            print(f"✓ {package}")
        except subprocess.CalledProcessError:
            print(f"✗ Failed to install {package}")
    
    print("Installation complete!")

def check_files():
    """Check if required files exist"""
    required_files = [
        "wol_content.txt",
        "api-key.env"
    ]
    
    missing_files = []
    for file in required_files:
        if not os.path.exists(file):
            missing_files.append(file)
    
    if missing_files:
        print("Missing required files:")
        for file in missing_files:
            print(f"  - {file}")
        
        if "wol_content.txt" in missing_files:
            print("\nTo create wol_content.txt:")
            print("1. Run your crawler (main.py)")
            print("2. Make sure it saves content as 'wol_content.txt'")
        
        if "api-key.env" in missing_files:
            print("\nTo create api-key.env:")
            print('1. Create a file named "api-key.env"')
            print('2. Add this line: OPENAI_API_KEY=your_actual_api_key_here')
    else:
        print("All required files found!")

if __name__ == "__main__":
    print("Setting up JW Vector Chatbot...")
    install_requirements()
    print("\n" + "="*50)
    check_files()
    print("\n" + "="*50)
    print("Setup complete! You can now run the vector-based chatbot.")